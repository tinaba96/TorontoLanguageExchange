# デプロイメントチェックリスト

本番環境にデプロイする前に、以下の項目を確認してください。

## セキュリティ

- [ ] `.env.local`ファイルが`.gitignore`に含まれている
- [ ] Supabase RLSポリシーがすべてのテーブルで有効化されている
- [ ] 本番環境でメール確認が有効になっている
- [ ] 強力なデータベースパスワードを使用している
- [ ] HTTPS接続が有効化されている（Vercelは自動）
- [ ] 環境変数が安全に管理されている

## Supabase設定

- [ ] 本番用のSupabaseプロジェクトを作成済み
- [ ] データベースマイグレーションを実行済み
- [ ] Realtimeが必要なテーブルで有効化されている
- [ ] Site URLとRedirect URLsが正しく設定されている
- [ ] Rate limitingが適切に設定されている
- [ ] バックアップポリシーが設定されている

## アプリケーション

- [ ] TypeScriptのコンパイルエラーがない（`npm run build`）
- [ ] ESLintのエラーがない（`npm run lint`）
- [ ] 環境変数が本番環境で正しく設定されている
- [ ] エラーハンドリングが適切に実装されている
- [ ] ローディング状態が適切に表示される

## パフォーマンス

- [ ] 画像が最適化されている（Next.js Imageコンポーネント使用）
- [ ] 不要なコンソールログが削除されている
- [ ] データベースクエリが最適化されている
- [ ] 必要なインデックスが作成されている

## 機能テスト

### ユーザー登録・認証
- [ ] 新規ユーザー登録が正常に動作する
- [ ] ログインが正常に動作する
- [ ] ログアウトが正常に動作する
- [ ] ロールベースのリダイレクトが正しい

### 生徒機能
- [ ] プロフィール編集が保存される
- [ ] プロフィール情報が正しく表示される
- [ ] 先生にプロフィールが表示される

### 先生機能
- [ ] 生徒一覧が表示される
- [ ] マッチングが作成できる
- [ ] 既にマッチング済みの生徒が一覧から除外される

### メッセージ機能
- [ ] マッチング一覧が表示される
- [ ] メッセージが送信できる
- [ ] リアルタイムでメッセージが更新される
- [ ] メッセージが正しい順序で表示される

## UI/UX

- [ ] モバイル端末で正しく表示される
- [ ] タブレットで正しく表示される
- [ ] デスクトップで正しく表示される
- [ ] ローディングスピナーが適切に表示される
- [ ] エラーメッセージが分かりやすい

## ドキュメント

- [ ] READMEが最新の状態である
- [ ] セットアップガイドが正確である
- [ ] APIドキュメントが整備されている（必要な場合）

## Vercelデプロイ設定

- [ ] GitHubリポジトリが接続されている
- [ ] 環境変数が設定されている
  - `NEXT_PUBLIC_SUPABASE_URL`
  - `NEXT_PUBLIC_SUPABASE_ANON_KEY`
- [ ] カスタムドメインが設定されている（オプション）
- [ ] Analytics設定が完了している（オプション）

## 監視とメンテナンス

- [ ] エラートラッキングサービスの導入を検討（Sentry等）
- [ ] アナリティクスの設定（Google Analytics、Vercel Analytics等）
- [ ] バックアップ戦略が確立されている
- [ ] 更新計画が策定されている

## 本番環境デプロイ後の確認

- [ ] アプリケーションが正常に起動する
- [ ] 新規ユーザー登録が動作する
- [ ] ログインが動作する
- [ ] マッチング機能が動作する
- [ ] メッセージ機能が動作する
- [ ] リアルタイム更新が動作する
- [ ] モバイルで正常に表示される

## ロールバック計画

問題が発生した場合の対処:

1. Vercelで以前のデプロイメントにロールバック
2. Supabaseでデータベースをバックアップから復元
3. 緊急連絡先リストを用意

## 次のステップ（デプロイ後）

1. ユーザーフィードバックの収集
2. パフォーマンスモニタリング
3. セキュリティ監査
4. 機能追加の計画

---

**注意**: すべてのチェックボックスが完了するまで、本番環境へのデプロイは推奨されません。
